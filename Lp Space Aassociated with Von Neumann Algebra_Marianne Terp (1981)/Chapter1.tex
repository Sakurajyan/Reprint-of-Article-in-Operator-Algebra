% \documentclass[12pt]{report}
% \usepackage{geometry}
%  \geometry{
%  a4paper,
%  total={170mm,257mm},
%  left=20mm,
%  top=20mm,
%  }
% \usepackage[hidelinks]{hyperref}
% \usepackage{tikz-cd}
% \usepackage{amsthm}
% \usepackage{amsmath}
% \usepackage{amssymb}
% \usepackage{amsfonts}
% \usepackage{xcolor}
% \usepackage{physics}
% \usepackage{mathrsfs}
% \usepackage{bbm}

% \tikzcdset{every label/.append style = {font = \normalsize}}
% \newtheorem{theorem}{Theorem}[section]
% \newtheorem{proposition}[theorem]{Proposition}
% \newtheorem{corollary}[theorem]{Corollary}
% \newtheorem{definition}[theorem]{Definition}
% \theoremstyle{definition}
% \newtheorem{example}[theorem]{Example}
% \newcommand{\inner}[1]{\langle#1\rangle}
% \newcommand{\Sp}{\operatorname{Sp}}
% \begin{document}
% \tableofcontents
\chapter{Measurable Operators with Respect to a Trace}
In this chapter, we define the notion of measurability with respect to a trace $\tau$ on a von Neumann algebra $M$ and show that the set $M$ of $\tau$-measurable operators is a complete topological *-algebra. Our presentation is a modified version of that given by E. Nelson \cite{13}.\par
Let $M$ be a - necessarily semifinite - von Neumann algebra acting on a Hilbert space $H$ and let $\tau$ be a normal faithful semifinite trace on $M$.\par
For the convenience of the reader, we immediately give the definition of $\tau$-measurability and state the main theorem about $\tau$-measurable operators.\par

Definition 14: A closed densely defined operator $a$ affiliated with $M$ is called $\tau$-measurable if for all $\delta\in \mathbb{R}_+$ there exists a projection $p\in M$ such that
\[
    pH\subset D(a)\text{ and } \tau(1-p)\leq \delta
\]
For a characterization of $\tau$-measurable operators in terms of the spectral projections of their absolute value, see Proposition 21 below.\par
We denote by $\widetilde{M}$ the set of $\tau$-measurable closed densely defined operators.\par
% \newpage
Theorem 28. 1) $\widetilde{M}$ is a *-algebra with respect to strong sum, strong product, and adjoint operation.\par
2) The sets
\[
    N(\epsilon,\delta)=\{a\in \widetilde{M}|\exists p\in M_{\text{proj}}:pH\subset D(a),\norm{ap}\leq \epsilon,\tau(1-p)\leq \delta\},
\]
where $\epsilon,\delta\in \mathbb{R}_+$, form a basis for the neighbourhoods of $0$ for a topology on $\widetilde{M}$ that turns $\widetilde{M}$ into a topological vector space. \par
3) $\widetilde{M}$ is a complete Hausdorff topological * -algebra and M is a dense subset of $\widetilde{M}$.\par

Once this theorem has been proven, we can freely add and multiply operators from $\widetilde{M}$, the operations being understood in the strong sense (see the definition below). Until then, we have to deal with unbounded operators in the usual careful way.\par
Although we are mainly interested in closed densely defined opera tors it will be convenient for us to work with more general kinds of unbounded operators. We therefore start by recalling some basic facts on arbitrary unbounded operators. Next, we recall some properties of the lattice $M_{\text{proj}}$ of projections in $M$. After this, we go on to develop the theory of $\tau$-measurability.\par

\section{Preliminaries on unbounded operators}
Recall that for any (linear) operators $a$ and $b$ on $H$ we can define the sum $a+b$ and the product $ab$ as operators on $H$ with domains
\begin{equation}
    D(a+b)=D(a)\cap D(b),
\end{equation}
\begin{equation}
    D(ab)=\{\xi\in D(b)|b\xi\in D(a)\}.
\end{equation}
% \newpage
These operations are associative so that $a+b+c$ and $abc$ are well-defined operators. Furthermore, for all $a$, $b$ and $c$ we have
\begin{equation}
    (a+b)c = ac + bc \text{ and } c(a+b)\supset ca + cb
\end{equation}
(with equality if $D(c)=H$).\par
We shall use the following terminology: an operator $a$ on $H$ is closed if its graph $G(a)$ is closed in $H\otimes H$; $a$ is preclosed if the closure $\overline{G(a)}$ of its graph is the graph of some - necessarily closed - operator (the closure of $a$, denoted $[a]$; $a$ is densely defined if $D(a)$ is dense in $H$.\par
If $a$, $b$ and $ab$ are densely defined, then
\begin{equation}
    (ab)^*\supset b^*a^*
\end{equation}
with equality if $a$ is bounded and everywhere defined.\par
A closed densely defined operator $a$ has a unique polar decomposition
\begin{equation}
    a = u\abs{a}
\end{equation}
where $\abs{a}$ is a positive self-adjoint operator and $u$ a partial isometry with $\supp(a)$ as its initial projection and $r(a)$, the projection onto the closure of the range of $a$, as its final projection.\par
If the sum $a+b$ of two closed densely defined operators $a$ and $b$ is preclosed and densely defined, then the closure $[a+b]$ is called the strong sum of $a$ and $b$. Similarly, the strong product is the closure $[ab]$ if $ab$ is preclosed and densely defined.\par
% \newpage
We shall write
\[
    \norm{a}=\sup\{\norm{a\xi}| \norm{\xi}\leq 1\}
\]
for all everywhere defined operators $a$ on $H$, bounded or not.For all such operators, the usual norm estimates hold:
\[
    \norm{a+b}\leq \norm{a}+\norm{b}, \norm{ab}\leq \norm{a}\norm{b}.
\]
Denote by $M'$ the commutant of $M$.\par
\begin{definition}
    A linear operator $a$ on $H$ is said to be affiliated with $M$ (and we write $a\eta H$) if
    \begin{equation}
        \forall y\in M':ya\subset ay
    \end{equation}
\end{definition}
\begin{remark}
    Using (3), (4) and (5) one easily verifies that
\end{remark}
\begin{enumerate}
    \item if $a,b\eta M$, then $a+b\eta M$ and $ab\eta H$;
    \item if $a$ is preclosed, resp. densely defined, and $a\eta M$, then $[a] \eta M$, resp. $a^*\eta M$;
    \item if $a$ is a closed densely defined operator with polar decomposition $a=u\abs{a}$, then $a\eta M$ if and only if $u\in M$.
\end{enumerate}
Notation. We denote by $\overline{M}$ the set of closed densely defined operators affiliated with $M$.\par

\section{Preliminaries on projections}
We denote by $M_{\text{proj}}$ the lattice of (orthogonal) projections in $M$. For a family $(p_i)_{i\in I}$ of projections in $M$, $\wedge_{i\in I}p_i$ (resp. $\vee_{i\in I}p_i$) is the projection onto $\cap_{i\in I}p_iH$ (resp. $\overline{\cup_{i\in I}p_iH}$).\par
Recall that
\begin{equation}
    (\wedge_{i\in I}p_i)^\perp=\vee_{i\in I}p_i^\perp, (\vee_{i\in I}p_i)^\perp=\wedge_{i\in I}p_i^\perp
\end{equation}
where $p^\perp=1-p$ is the projection orthogonal to $p$\par
Two projections $p$ and $q$ are equivalent if $p=u^*u$ and $q=uu^*$ for some $u\in M$. We denote equivalence by $\sim$. Equivalent projections have the same trace.\par
By the polar decomposition theorem, we have
\begin{lemma}
    Let $a$ be a closed densely defined operator affiliated
    with $M$. Then
    \[
        \supp(a)\sim \rsupp(a)
    \]
    where $\rsupp(a)$ denotes the projection onto the closure of the range of $a$.
\end{lemma}
For any projections $p,q\in M$ we have
\begin{equation}\label{(8)}
    (p\vee q)-p\sim q-(p\wedge q).
\end{equation}
It follows that
\begin{equation}\label{(9)}
    \tau(p\vee q)\leq \tau(p)+\tau(q).
\end{equation}
More generally,
\begin{equation}
    \tau(\vee_{i\in I}p_i)\leq \sum_{i\in I}\tau(p_i)
\end{equation}
for any family $(p_i)_{i\in I}$ of projections in $M$ (if I is finite, this follows by induction from \eqref{(9)}; for the general case, use the normality of $\tau$).\par
Another consequence of \eqref{(8)} is this:
\begin{equation}\label{(11)}
    \forall p,q\in M_{\text{proj}}: p\wedge q=0\Rightarrow p\lesssim 1-q
\end{equation}
(where $\lesssim$ means: "is equivalent to a subprojection of"). Indeed,
\[
    p=1-p^\perp=(p\wedge q)^\perp-p^\perp=(p^\perp\vee q^\perp)-p^\perp\sim q^\perp-(p^\perp \wedge q^\perp)\leq q^\perp=1-q.
\]
\section{The theory of $\tau$-measurable operators}
\begin{definition}
    Let $\epsilon,\delta\in \mathbb{R}_+$. Then we denote by $D(\epsilon,\delta)$ the set of all operators $a\eta M$ for which there exists a projection $p\in M$ such that
    \begin{enumerate}
        \item $pH \subset D(a)$ and $\norm{ap}\leq \epsilon$ and
        \item $\tau(1-p)\leq \delta$.
    \end{enumerate}
\end{definition}
When $pH\subset D(a)$, the operator $ap$ is everywhere defined. The requirement $\norm{ap}\leq \epsilon$ in particular implies that $ap$ is bounded.\par
Note that we do not require $a$ to be densely defined, closed or preclosed.
\begin{proposition}\label{prop: 5}
    Let $\epsilon_1,\epsilon_2,\delta_1,\delta_2\in \mathbb{R}_+$. Then
    \begin{enumerate}
        \item $D(\epsilon_1,\delta_1)+D(\epsilon_2,\delta_2)\subset D(\epsilon_1+\epsilon_2,\delta_1+\delta_2)$,
        \item $D(\epsilon_1,\delta_1)D(\epsilon_2,\delta_2)\subset D(\epsilon_1\epsilon_2,\delta_1+\delta_2)$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    (1) Let $a\in D(\epsilon_1,\delta_1)$ and $b\in D(\epsilon_2,\delta_2)$. Then there exist projections $p,q\in M$ such that
    \[
        \begin{split}
            pH\subset D(a),\norm{ap}\leq \epsilon_1,\text{ and } \tau(1-p)\leq \delta_1,\\
            qH\subset D(b),\norm{bq}\leq \epsilon_2,\text{ and } \tau(1-q)\leq \delta_2.
        \end{split}
    \]
    Put $r=p\wedge q$. Then
    \[
        rH=pH\cap qH\subset D(a)\cap D(b)=D(a+b)
    \]
    and
    \[
        \norm{(a+b)r}=\norm{ar+br}\leq\norm{ar}+\norm{br}\leq \norm{ap}+\norm{bq}\leq \epsilon_1+\epsilon_2
    \]
    Furthermore,
    \[
        \tau(1-r)=\tau((p\wedge q)^\perp)=\tau(p^\perp\vee q^\perp)\leq \tau(1-p)+\tau(1-q)\leq \delta_1+\delta_2
    \]
    This proves (1).\par
    To prove (2), let $a\in D(\epsilon_1,\delta_1)$, $b\in D(\epsilon_2,\delta_2)$ and take $p,q\in M_{\text{proj}}$ as above. Then $bq$, and hence $(1-p)bq$, is bounded. Denote by $s$ the projection onto its null space:
    \[
        sH=N((1-p)bq).
    \]
    Then $bq\xi\in pH\subset D(a)$ for all $\xi\in sH$, so that $sH\subset D(abq)$ and hence
    \[
        (q\wedge s)H\subset D(ab)
    \]
    Also, $abqs=apbqs$ so that
    \[
        ab(q\wedge s)=abqs(q\wedge s)=apbq(q\wedge s)
    \]
    and thus
    \[
        \norm{ab(q\wedge s)}\leq\norm{ap}\norm{bq}\leq \epsilon_1\epsilon_2.
    \]
    On the other hand, using that
    \[
        1-s=\supp((1-p)bq)\sim \rsupp((1-p)bq)\leq 1-p,
    \]
    we have
    \[
        \begin{split}
            \tau(1-(q\wedge s))=\tau((1-q)\vee (1-s))\leq& \tau(1-q)+\tau(1-s)\\
            \leq &\tau(1-q)+\tau(1-p)\leq \delta_1+\delta_2.
        \end{split}
    \]
    This completes the proof.
\end{proof}
\begin{proposition}\label{prop: 6}
    Let $\epsilon,\delta\in \mathbb{R}_+$.
    \begin{enumerate}
        \item Let $a$ be a preclosed operator. Then
              \[
                  a\in D(\epsilon,\delta)\Rightarrow [a]\in D(\epsilon,\delta).
              \]
        \item Let a be a closed densely defined operator with polar decomposition $a=u\abs{a}$. Then
              \[
                  a\in D(\epsilon,\delta)\Leftrightarrow u\in M\text{ and }\abs{a}\in D(\epsilon,\delta).
              \]
    \end{enumerate}
\end{proposition}
\begin{proof}
    (1): trivial. (2): trivial, since $a=u\abs{a}$, $\abs{a}=u^*a$, and $\norm{u}\leq 1$.
\end{proof}
\begin{lemma}\label{Lemma 7}
    Let $a\in\overline{M}$ and $\epsilon,\delta\in \mathbb{R}_+$. Then
    \[
        a\in D(\epsilon,\delta)\Leftrightarrow \tau(\chi_{]\epsilon,\infty[}(\abs{a}))\leq \delta
    \]
    (where $\chi_{]\epsilon,\infty[}(\abs{a})$ denotes the spectral projection of $\abs{a}$ corresponding to the interval $]\epsilon,\infty[$).
\end{lemma}
\begin{proof}
    "$\Leftarrow$": Put $p=\chi_{[0,\epsilon]}(\abs{a})$. Then $pH\subset D(\abs{a})$ and $\norm{\abs{a}p}\leq \epsilon$.\par
    "$\Rightarrow$": For some $p\in M_{\text{proj}}$, we have
    \[
        \norm{\abs{a}p}\leq \epsilon \text{ and } \tau(1-p)\leq \delta.
    \]
    Let $\abs{a}=\int_0^\infty\lambda\dd e_\lambda$ be the spectral decomposition of $\abs{a}$. Now for all $\xi\in pH$ we have
    \[
        \norm{\abs{a}\xi}^2\leq \epsilon^2\norm{\xi}^2,
    \]
    and for all $\xi\in (1-e_{\epsilon})H\setminus\{0\}$ we have
    \[
        \norm{\abs{a}\xi}^2>\epsilon^2\norm{\xi}^2
    \]
    since
    \[
        \norm{\abs{a}\xi}^2=\int_0^\infty\lambda^2\dd (e_\lambda \xi|\xi)=\int_{]\epsilon,\infty[}\lambda^2\dd(e_\lambda\xi|\xi).
    \]
    Hence $(1-e_\epsilon)H\cap pH$ must be $\{0\}$, i.e. $(1-e_\epsilon)\wedge p=0$. By \eqref{(11)} we conclude that $1-e_\epsilon\lesssim 1 - p$, whence $\tau(1-e_\epsilon)\leq \delta$.
\end{proof}
\begin{proposition}\label{prop: 8}
    Let $a\in \overline{M}$ and $\epsilon,\delta\in \mathbb{R}_+$. Then
    \[
        a\in D(\epsilon,\delta)\Leftrightarrow a^*\in D(\epsilon,\delta)
    \]
\end{proposition}
\begin{proof}
    Let $a=u\abs{a}$ be the polar decomposition of $a$. Then $u$ is an isometry of $\chi_{]0,\infty[}(\abs{a})=\supp(a)$ onto $\chi_{]0,\infty[}(\abs{a^*})=\supp(a^*)=\rsupp(a)$. By uniqueness of the spectral decomposition, $u$ induces for each $\lambda\in \mathbb{R}_+$ an isometry of $\chi_{]\lambda,\infty[}(\abs{a})$ onto $\chi_{]\lambda,\infty[}(\abs{a^*})$.
    The result follows by Lemma \ref{Lemma 7}.
\end{proof}
\begin{definition}
    A subspace $E$ of $H$ is called $\tau$-dense if for all $\delta\in \mathbb{R}_+$, there exists a projection $p\in M$ such that
    \[
        pH\subset E \text{ and } \tau(1-p)\leq \delta.
    \]
\end{definition}
\begin{proposition}\label{prop: 10}
    Let $E$ be a $\tau$-dense subspace of $H$ . Then there exists an increasing sequence $(p_n)_{n\in \mathbb{N}}$ of projections in $M$ with
    \[
        p_n\nearrow 1,\tau(1-p_n)\to 0,\text{ and } \cup_{n=1}^\infty p_nH\subset E.
    \]
\end{proposition}
\begin{proof}
    Take projections $q_k\in M$, $k\in N$, such that
    \[
        q_kH\subset E \text{ and } \tau(1-q_k)\leq 2^{-k}.
    \]
    For each $n\in N$, put
    \[
        p_n=\wedge_{k=n+1}^\infty q_k.
    \]
    Then
    \[
        p_nH=\cap_{k=n+1}^\infty q_kH\subset E
    \]
    and
    \[
        \tau(1-p_n)=\tau\left( \vee_{k=n+1}^\infty(1-q_k) \right)\leq \sum_{k=n+1}^\infty\tau(1-q_k)\leq \sum_{k=n+1}^\infty 2^{-k}=2^{-n}
    \]
    It follows that
    \[
        p_n\nearrow 1;
    \]
    indeed, denoting by $p$ the supremum of the increasing sequence $p_n$, we have
    \[
        \forall n\in \mathbb{N}:\tau(1-p)\leq \tau(1-p_n)\leq 2^{-n}
    \]
    whence $\tau(1-p)=0$ and $p=1$.\par
    Furthermore,
    \[
        \cup_{n=1}^\infty p_nH\subset E.
    \]
\end{proof}
\begin{corollary}
    Let $E$ be a $\tau$-dense subspace of $H$. Then $E$ is dense in $H$.
\end{corollary}
An important property of $\tau$-dense subspaces is the following:
\begin{proposition}\label{prop: 12}
    Let $a,b\in \overline{M}$ and let $E$ be a $\tau$-dense subspace of $H$ contained in $D(a)\cap D(b)$. Suppose that
    \[
        a|_E=b|_E.
    \]
    Then $a=b$.
\end{proposition}
The proof is based on the following lemma:
\begin{lemma}
    1) Let $p_0\in M_{\text{proj}}$. Suppose that
    \[
        \forall \delta\in \mathbb{R}_+ \exists p\in M_{\text{proj}}: p_0\wedge p=0\text{ and }\tau(1-p)\leq \delta.
    \]
    Then $p_0=0$.\par
    2) Let $p_1,p_2\in M_{\text{proj}}$. Suppose that
    \[
        \forall \delta\in \mathbb{R}_+ \exists p\in M_{\text{proj}}: p_1\wedge p=p_2\wedge p\text{ and }\tau(1-p)\leq \delta.
    \]
    and $p_1=p_2$.
\end{lemma}
\begin{proof}
    1) Let $\delta\in \mathbb{R}_+$. Then $\tau(p_0)\leq \delta$. (indeed, for some $p\in M_{\text{proj}}$ we have $p_0\wedge p=0$ and $\tau(1-p)\leq \delta$, whence $p_0\lesssim 1-p$ and $\tau(p_0)\leq \tau(1-p)\leq \delta$). Hence $\tau(p_0)=0$ and $p_0=0$.\par
    2) Put $p_0=p_1-(p_1\wedge p_2)$. Now $p_1\wedge p= p_2\wedge p$ implies $p_1\wedge p= (p_1\wedge p_2)\wedge p$ and hence $p_0\wedge p=0$, so that 1) applies to $p_0$. Hence $p_0=0$, i.e. $p_1 = p_1\wedge p_2$. Similarly, $p_2=p_1\wedge p_2$. In all, $p_1 = p_2$.
\end{proof}
\begin{proof}[Proof of Proposition 12]
    Consider in the Hilbert space $H_2=H\oplus H$ the von Neumann algebra $M_2=\begin{bmatrix}
            M & M \\
            M & M
        \end{bmatrix}$ equipped with the normal faithful semifinite trace $\tau_2$ defined by
    \[
        \tau \begin{pmatrix}
            x_{11} & x_{12} \\
            x_{21} & x_{22}
        \end{pmatrix}=\tau(x_{11})+\tau(x_{22}).
    \]
    Denote by $p_a$ and $p_b$ the projections onto the graphs $G(a)$ and $G(b)$ of $a$ and $b$. Since $a$ and $b$ are affiliated with $M$, $G(a)$ and $G(b)$ are invariant under all elements of $M_2'=\{\begin{bmatrix}
            y & 0 \\
            0 & y
        \end{bmatrix}:y\in M'\}$ and thus $p_a,p_b\in M_2$. \par
    Let $\delta\in \mathbb{R}_+$. Then there exists a projection $p\in M$ with
    $pH\subset E$ and $\tau(1-p)\leq \frac{\delta}{2}$. Put $p_2= \begin{bmatrix}
            p & 0 \\
            0 & p
        \end{bmatrix}$. Then $\tau_2(1-p_2)\leq \delta$.\par
    Furthermore,
    \[
        p_a\wedge p_2=p_b\wedge p_2
    \]
    since $a$ and $b$ agree on $pH\subset E$ and thus
    \[
        \begin{split}
            G(a)\cap(pH\oplus pH) =& \{\inner{\xi,a\xi},\xi\in pH, a\xi\in pH\}\\
            =& \{\inner{\xi,b\xi},\xi\in pH, b\xi\in pH\}=G(b)\cap(pH\oplus pH).
        \end{split}
    \]
    By Lemma 13, we conclude that $p_a=p_b$, whence $a = b$.
\end{proof}
\begin{definition}\label{def: 14}
    An operator $a\in \overline{M}$ is called $\tau$-measurable if $D(a)$ is $\tau$-dense, i.e. if for all $\delta\in \mathbb{R}_+$ there exists a projection $p\in M$ such that
    \begin{equation}
        pH\subset D(a) \text{ and } \tau(1-p)\leq \delta.
    \end{equation}
    The set of $\tau$-measurable operators $a\in \overline{M}$ is denoted $\widetilde{M}$.
\end{definition}
\begin{corollary}
    1) Let $a,b\in \widetilde{M}$. If
    \[
        a\subset b
    \]
    then
    \[
        a=b.
    \]\par
    2) Let $a\in \widetilde{M}$. If a is symmetric (in particular, if $a$ is positive), then $a$ is self-adjoint.
\end{corollary}
\begin{proof}
    Immediate from Definition \ref{def: 14} and Proposition \ref{prop: 12} (for 2), use that $a\subset a^*$).
\end{proof}
Note that when $a$ is closed and $p\in M_{\text{proj}}$ is such that $pH\subset D(a)$, then the everywhere defined operator $ap$ is also closed and hence - by the closed graph theorem - automatically bounded. Therefore the following definition is a generalization of Definition \ref{def: 14}.
\begin{definition}
    Any operator $a\eta M$ is called $\tau$-premeasurable if for all $\delta\in \mathbb{R}_+$ there exists a projection $p\in M$ such that
    \begin{equation}
        pH\subset D(a), \norm{ap}<\infty,\text{ and } \tau(1-p)\leq \delta.
    \end{equation}
\end{definition}
By definition of the $D(\epsilon,\delta)$, this may be reformulated as:
\begin{remark}\label{remark: 17}
    Let $a\eta M$. Then $a$ is $\tau$-premeasurable if and only if
    \[
        \forall \delta\in \mathbb{R}_+ \exists \epsilon\in \mathbb{R}_+: a\in D(\epsilon,\delta).
    \]
\end{remark}
Also note
\begin{proposition}
    Let $a\eta M$. If a is $\tau$-premeasurable, then a is densely defined.
\end{proposition}
\begin{proof}
    $D(a)$ is $\tau$-dense.
\end{proof}
\begin{proposition}\label{prop: 19}
    Let $a\eta M$. Suppose that $a$ is $\tau$-premeasurable and preclosed. Then
    \[
        [a]\in \widetilde{M}.
    \]
\end{proposition}
\begin{proof}
    Trivial.
\end{proof}
\begin{proposition}\label{prop: 20}
    Let $a,b\eta M$ be $\tau$-premeasurable. Then $a+b$ and $ab$ are also $\tau$-premeasurable.
\end{proposition}
\begin{proof}
    Combine Remark \ref{remark: 17} and Proposition \ref{prop: 5}.
\end{proof}
We have the following characterization of $\tau$-measurable operators:
\begin{proposition}\label{prop: 21}
    Let $a\in \overline{M}$ with polar decomposition $a=u\abs{a}$. Then the following assertions are equivalent:
    \begin{enumerate}
        \item a is $\tau$-measurable,
        \item $\abs{a}$ is $\tau$-measurable,
        \item $\forall \delta\in \mathbb{R}_+ \exists \epsilon\in \mathbb{R}_+: a\in D(\epsilon,\delta)$,
        \item $\forall \delta\in \mathbb{R}_+ \exists \epsilon\in \mathbb{R}_+: \tau(\chi_{]\epsilon,\infty[}(\abs{a}))\leq \delta$,
        \item $\tau(\chi_{]\lambda,\infty[}(\abs{a}))\to 0$ as $\lambda\to \infty$,
        \item $\forall \lambda\in \mathbb{R}_+:\tau(\chi_{]\lambda,\infty[}(\abs{a}))<\infty$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    The equivalence of (i), (ii), and (iii), follows from Lemma \ref{Lemma 7}. Now note that
    \[
        \tau(\chi_{]\lambda,\infty[}(\abs{a}))\searrow \emptyset \text{ as }\lambda\to \infty
    \]
    so that, by the normality of $\tau$,
    \[
        \tau(\chi_{]\lambda,\infty[}(\abs{a}))\searrow 0 \text{ as }\lambda\to \infty
    \]
    if $ \tau(\chi_{]\lambda_0,\infty[}(\abs{a}))<\infty$ for some $\lambda_0$. The equivalence of (iii), (iv), (v), and (vi) follows.
\end{proof}
\begin{corollary}
    We have $M\subset \widetilde{M}$.
\end{corollary}
\begin{proof}
    If $a$ is bounded, then $\tau(\chi_{]\norm{a},\infty[}(\abs{a}))=0$.
\end{proof}
\begin{proposition}
    Let $a\in \widetilde{M}$ Then also $a^*\in \widetilde{M}$.
\end{proposition}
\begin{proof}
    Combine Proposition \ref{prop: 8} and Proposition \ref{prop: 21}, (i) $\Leftrightarrow$ (iii).
\end{proof}
\begin{proposition}
    1) Let $a,b\in \widetilde{M}$. Then $a+b$ and $ab$ are densely defined and preclosed, and $[a+b]\in \widetilde{M}$, $[ab]\in \widetilde{M}$.\par
    2) $\widetilde{M}$ is a *-algebra with respect to strong sum and strong product.
\end{proposition}
\begin{proof}
    1) Let $a,b\in \widetilde{M}$. Then also  $a^*,b^*\in \widetilde{M}$. By Proposition \ref{prop: 20}, $a+b$ and $a^*+b^*$ are $\tau$-premeasurable. In particular, they are densely defined. Hence $(a^*+b^*)^*$ exists and $a+b\subset (a^*+b^*)^*$, whence $a+b$ is also preclosed. By Proposition \ref{prop: 19},  $[a+b]\in \widetilde{M}$.\par
    A quite analogous reasoning gives the result on $ab$.\par
    2) Let $a,b,c\in \widetilde{M}$. Then by Proposition \ref{prop: 20} the operators
    \[
        a+b+c,abc,ac+bc,ca+cb,a^*+b^*,b^*a^*
    \]
    are all $\tau$-premeasurale. Hence by Proposition \ref{prop: 12}, each of them admits at most one extension in $\widetilde{M}$. It follows that
    \[
        \begin{split}
            [[a+b]+c]=[a+[b+c]],[[ab]c]=[a[bc]],  \\
            [[a+b]c]=[[ac]+[bc]],[c[a+b]]=[[ca]+[cb]],\\
            [a+b]^*=[a^*+b^*],[ab]^*=[b^*a^*].
        \end{split}
    \]
\end{proof}
\begin{notation}
    From now on, we will omit the $[~]$ in the notation for strong sum and strong product.
\end{notation}
\begin{definition}
    For all $\epsilon,\delta\in \mathbb{R}_+$, we put
    \[
        N(\epsilon,\delta)=\widetilde{M}\cap D(\epsilon,\delta),
    \]
    i.e. $N(\epsilon,\delta)$ is the set of $\tau$-measurable $a\in \widetilde{M}$ for which there exists a projection $p\in M$ such that
    \[
        \norm{ap}\leq \epsilon \text{ and } \tau(1-p)\leq \delta.
    \]
\end{definition}
\begin{lemma}\label{lemma: 26}
    For all $\epsilon,\epsilon_1,\epsilon_2,\delta,\delta_1,\delta_2\in \mathbb{R}_+$ and $\lambda\in \mathbb{C}$ we have
    \begin{enumerate}
        \item $N(\epsilon,\delta)^*=N(\epsilon,\delta)$,
        \item $N(\abs{\lambda}\epsilon,\delta)=\lambda N(\epsilon,\delta)$,
        \item $\epsilon_1\leq \epsilon_2$, $\delta_1\leq \delta_2\Rightarrow N(\epsilon_1,\delta_1)\subset N(\epsilon_2,\delta_2)$,
        \item $N(\epsilon_1,\delta_1)\cap N(\epsilon_2,\delta_2)\supset N(\epsilon_1\wedge \epsilon_2,\delta_1\wedge \delta_2)$,
        \item $N(\epsilon_1,\delta_1)+N(\epsilon_2,\delta_2)\subset N(\epsilon_1+\epsilon_2,\delta_1+\delta_2)$,
        \item $N(\epsilon_1,\delta_1)N(\epsilon_2,\delta_2)\subset N(\epsilon_1\epsilon_2,\delta_1\delta_2)$,
    \end{enumerate}
\end{lemma}
\begin{proof}
    (ii), (iii), (iv) are easily verified. (i) follows from Proposition \ref{prop: 8} and (v), (vi) follow from Proposition \ref{prop: 5} and Proposition \ref{prop: 6}, (i) ((v) and (vi) are to be understood in the strong sense).
\end{proof}
\begin{proposition}
    The $N(\epsilon,\delta)$, $\epsilon,\delta\in \mathbb{R}_+$, form a basis for the neighbourhoods of $0$ for a topological vector space topology on $\widetilde{M}$.
\end{proposition}
\begin{proof}
    This follows from Lemma \ref{lemma: 26}, (ii), (iii), (iv) and (v).
\end{proof}
\begin{theorem}
    $\widetilde{M}$ is a complete Hausdorff topological *-algebra in which $M$ is dense.
\end{theorem}
\begin{proof}
    1) To show that $\widetilde{M}$ is Hausdorff, we shall prove that
    \[
        \cap_{\epsilon,\delta\in \mathbb{R}_+}N(\epsilon,\delta)=\{0\}.
    \]
    Let $a\in \cap_{\epsilon,\delta\in \mathbb{R}_+}N(\epsilon,\delta)$. Then
    \[
        \forall \delta\in \mathbb{R}_+ \forall \epsilon\in \mathbb{R}_+: \tau(\chi_{]\epsilon,\infty[}(\abs{a}))\leq \delta.
    \]
    Since $\tau$ is faithful, this implies that all $\chi_{]\epsilon,\infty[}(\abs{a})=0$, whence $a=0$.\par
    2) Next let us prove that $\widetilde{M}$ is a topological *-algebra. By Lemma \ref{lemma: 26}, (i), the adjoint operation is continuous. Now let $a_0,b_0\in \widetilde{M}$ and let $\epsilon,\delta\in \mathbb{R}_+$. Take $\mu,\lambda\in \mathbb{R}_+$ such that
    \[
        a_0\in N(\mu,\delta),b_0\in N(\lambda,\delta).
    \]
    Then for all $a,b \in\widetilde{M}$ such that $a-a_0 \in N(\epsilon,\delta)$ and $b-b_0 \in N(\epsilon,\delta)$, we have
    \[
        \begin{split}
            ab-a_0b_0=&(a-a_0)(b-b_0)+a_0(b-b_0)+(a-a_0)b_0\\
            \in &N(\epsilon,\delta)N(\epsilon,\delta)+N(\mu,\delta)N(\epsilon,\delta)+N(\epsilon,\delta)N(\lambda,\delta)\\
            \subset&N(\epsilon^2,2\delta)+N(\mu\epsilon,2\delta)+N(\lambda\epsilon,2\delta)\\
            \subset&N(\epsilon(\epsilon+\lambda+\mu),6\delta).
        \end{split}
    \]
    It follows that
    \[
        (a,b)\mapsto (ab)
    \]
    is continuous.\par
    3) $M$ is dense in $\widetilde{M}$. Indeed, let $a\in \widetilde{M}$ and take projections $p_n\in M$ such that
    \[
        p_n\nearrow 1, \tau(1-p_n)\to 0, \text{ and }\cup_{n\in \mathbb{N}}p_nH\subset D(a)
    \]
    (possible by Proposition \ref{prop: 10}). Then $ap_n \in M$ and
    \[
        ap_n\to a \text{ in } \widetilde{M}
    \]
    since $\norm{(ap_n-a)p_m}=0$ for all $m\geq n$ and $\tau(1-p_m)\to 0$ as $m\to \infty$.\par
    4) Finally, we shall prove that the topological vector space $\widetilde{M}$ is complete.\par
    Since $\widetilde{M}$ has a countable basis for the neighbourhoods of 0 (use e.g. the $N(1/n,1/m)$ , $n,m\in \mathbb{N}$), we just have to show that every Cauchy sequence $(a_n)_{n\in \mathbb{N}}$ in $\widetilde{M}$ converges. So let $(a_n)_{n\in \mathbb{N}}$ be a Cauchy sequence in $\widetilde{M}$.\par
    Since $M$ is dense in $\widetilde{M}$, we may assume that all $a_n\in M$ (if not, replace each $a_n$ by $a_n'\in M$ such that $a_n-a_n'\in N(1/n, 1/n)$, and observe that $(a_n')_{n\in \mathbb{N}}$ converges if and only if $(a_n)_{n\in \mathbb{N}}$ converges). Furthermore, we may assume that
    \[
        \forall n\in \mathbb{N}: a_{n+1}-a_n\in N(2^{-(n+1)},2^{-n})
    \]
    (since a subsequence of the given sequence has this property).\par
    Now take projections $p_n \in M$ such that
    \[
        \norm{(a_{n+1}-a_n)p_n}\leq 2^{-(n+1)} \text{ and } \tau(1-p_n)\leq 2^{-n}.
    \]
    For each $n\in \mathbb{N}$, put
    \[
        q_n=\wedge_{k=n+1}^\infty p_k.
    \]
    Then
    \[
        \tau(1-q_n)=\tau\left( \vee_{k=n-1}^\infty (1-p_k) \right)\leq \sum_{k=n+1}^\infty \tau(1-p_k)\leq \sum_{k=n+1}^\infty 2^{-k}=2^{-n};
    \]
    and
    \begin{equation}\label{eqn: 14}
        \forall m\geq n+1~\forall l\in \mathbb{N}:\norm{(a_{m+l}-a_m)q_n}\leq 2^{-m}
    \end{equation}
    since $q_n\leq p_k$ for all $k\geq m\geq n+1$ and hence
    \[
        \begin{split}
            \norm{(a_{m+l}-a_m)q_n}\leq& \sum_{k=m}^{m+l-1}\norm{(a_{k+1}-a_k)q_n}\\
            \leq& \sum_{k=m}^{m+l-1}\norm{(a_{k+1}-a_k)p_k}\leq \sum_{k=m}^{m+l-1}2^{-(k+1)}\leq 2^{-m}.
        \end{split}
    \]
    Let $\xi\in \cup_{n\in \mathbb{N}}q_nH$. Then $\xi\in q_nH$ for some $n\in \mathbb{N}$ and hence by \eqref{eqn: 14}, the sequence $(a_m\xi)_{m\in \mathbb{N}}$ is Cauchy. Put
    \[
        a\xi=\lim_{m\to \infty}a_m\xi
    \]
    We have now defined an operator $a$ with $D(a)=\cup_{n\in \mathbb{N}}q_nH$ (note that $D(a)$ is a linear subspace because $(q_n)_{n\in \mathbb{N}}$ is an increasing sequence of projections).\par
    By construction, $a$ is $\tau$-premeasurable: for all $n\in \mathbb{N}$, we have $q_nH\subset D(a)$ and $\tau(1-q_n)\leq 2^{-n}$. We claim that $a$ is also preclosed. To see this, apply the preceding arguments to $(a_n^*)_{n\in \mathbb{N}}$. Hence there exists a $\tau$-premeasurable operator $b$ such that
    \[
        b\eta=\lim_{m\to \infty}a_n^*\eta,\eta\in D(b).
    \]
    Then
    \[
        \forall \xi\in D(a)~\forall \eta\in D(b):(a\xi|\eta)=\lim (a_m\xi|\eta)=\lim(\xi|a_m^*\eta)=(\xi|b\eta),
    \]
    whence
    \[
        a\in b^*.
    \]
    Hence $a$ is preclosed. By Proposition \ref{prop: 19} we then have $[a]\in \widetilde{M}$. Write $a_0=[a]$.\par
    Finally we shall prove that actually
    \begin{equation}
        a_n\to a_0 \text{ in }\widetilde{M}.
    \end{equation}\label{eqn: 15}
    Let $\epsilon,\delta\in \mathbb{R}_+$. Take $n_0\in \mathbb{N}$ such that $2^{-(n_0+1)}\leq \epsilon$ and $2^{-n_0}\leq \delta$. Then for all $m\geq n_0+1$ we have
    \[
        \norm{(a_0-a_m)q_{n_0}}\leq 2^{-(n_0+1)}\leq \epsilon
    \]
    and
    \[
        \tau(1-q_{n_0})\leq 2^{-n_0}\leq \delta
    \]
    since
    \[
        \forall \xi\in H:(a_0-a_m)q_{n_0}\xi=\lim_{l\to\infty}(a_{m+l}a_m)q_{n_0}\xi
    \]
    and
    \[
        \norm{(a_{m+l}-a_m)q_{n_0}}\leq 2^{-m}\leq 2^{-(n_0+1)}\leq \epsilon.
    \]
    Hence
    \[
        \forall m\geq n_0+1:a_0-a_m\in N(\epsilon,\delta).
    \]
    This proves \eqref{eqn: 15}.
\end{proof}
\begin{example}
    1) If $\tau$ is finite, then $\widetilde{M}=\overline{M}$, i.e. all closed densely defined operators affiliated with $M$ are $\tau$-measurable (by Proposition \ref{prop: 21}, (vi)).\par
    2) If $M=B(H)$ and $\tau$ is the usual trace $\Tr$, then $\widetilde{M}=M$ (by Proposition \ref{prop: 21}, (iv), and the fact that $\Tr(x) < 1, x\geq 0$, implies $x = 0$).\par
    3) If $(X,\mu)$ is a measure space, $M = L^\infty(x,\mu)$ and $\tau=\int\cdot \dd \mu$, then $\widetilde{M}$ is the closure of $L^\infty(x,\mu)$ for the topology of convergence in measure.
\end{example}
\section{$L^p$ spaces with respect to a trace}
For any positive self-adjoint operator $a$ affiliated with $M$, we put
\[
    \tau(a)=\sup_{n\in \mathbb{N}}\tau\left( \int_0^n \lambda\dd e_\lambda \right)
\]
where
\[
    a=\int_0^\infty \lambda  \dd e_\lambda
\]
is the spectral representation of $a$ . Then for each $p\in [1,\infty[$, we can define
\[
    L^p(M,\tau)=\{a\in \overline{M}|\tau(\abs{a}^p)<\infty\}
\]
and
\[
    \norm{a}_p=\tau(\abs{a}^p)^\frac{1}{p},a\in L^p(M,\tau).
\]
The $(L^p(M,\tau),\norm{\cdot}_p)$ are Banach spaces in which $I=\{x\in M|\tau(\abs{x})<\infty\}$ is dense, and they are all contained in (and even continuously embedded in) $\widetilde{M}$ (for this and further results, see \cite{13}; see also \cite{3}, \cite{12}, \cite{21}, and Chapter IV).

\section{Notes and comments}
The notion of measurable operators was introduced by I.E. Segal \cite{15} and formed the basis for investigations in non-commutative integration theory, i.e. a theory of "integration" where $L^\infty(X,\mu)$ (corresponding to a measure space $(X,\mu)$ is replaced by a more general von Neumann algebra. Among other things, this theory provided a framework for constructing $L^p$ spaces associated with (semifinite) von Neumann algebras as concrete spaces of (closed densely defined) operators (\cite{12}, \cite{21}) (isomorphic to J. Dixmier's "abstract" $L^p$ spaces \cite{3}).\par
In \cite{13}, E. Nelson gave a new approach - requiring less knowledge of von Newmann algebra techniques - to the theory, based on the notion of measurability with respect to a trace (inspired by the notion of convergence in measure introduced by W. F. Stinespring in \cite{16}). Any $\tau$-measurable operator is also measurable in the sense of \cite[Definition 2.1]{15}, whereas the converse is not in general true. The set of $\tau$-measurable operators is, howe ver, big enough to contain the $L^p$ spaces with respect to $\tau$.\par
In our presentation, we have followed \cite{13} with some modifications. In \cite{13}, $\widetilde{M}$ is defined as the (abstract) completion of M with respect to a certain (measure) topology on M (given by the $0$-neighbourhoods $N(\epsilon,\delta)\cap M$, there simply called $N(\epsilon,\delta)$; afterwards, $\widetilde{M}$ is identified with a subset of the closed densely defined operators affiliated with $M$. As a tool, the completion of the Hilbert space $H$ with respect to a certain (measure) topology is considered. - We have preferred to work with operators on $H$ right from the beginning and to introduce the measure topology directly on the whole of $\widetilde{M}$. When doing so, we do not need a new topology on $H$.
% \end{document}